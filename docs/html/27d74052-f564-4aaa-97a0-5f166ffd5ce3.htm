<!DOCTYPE html ><html lang="en-US"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" href="../css/bulma.css" /><link rel="stylesheet" href="../css/font-awesome.min.css" /><link rel="stylesheet" href="../css/presentationStyle.css" /><link rel="stylesheet" href="../css/vs.min.css" /><script src="../scripts/jquery-3.5.1.min.js"></script><script src="../scripts/clipboard.min.js"></script><script src="../scripts/highlight.min.js"></script><script src="../scripts/presentationStyle.js"></script><title>Examples Overview</title><meta name="Title" content="Examples Overview" /><meta name="Help.Id" content="27d74052-f564-4aaa-97a0-5f166ffd5ce3" /><meta name="Help.ContentType" content="Concepts" /><meta name="guid" content="27d74052-f564-4aaa-97a0-5f166ffd5ce3" /><meta name="Description" content="These examples illustrate how to use the class libraries." /><meta name="tocFile" content="../toc/Root.xml" /></head><body><div class="fixedLayout"><div id="Header" class="fixedHeader"><div class="pageHeader level mb-0 py-2 px-4"><div id="TitleContainer" class="level-left"><div class="level-item"><img src="../icons/Help.png" /></div><div id="DocumentationTitle" class="level-item">Small Earth Technology ANT+ Class Library</div></div><div id="LangFilterSearchContainer" class="level-right"><div class="level-item"><div class="dropdown is-hoverable"><div class="dropdown-trigger"><button class="button" aria-haspopup="true" aria-controls="dropdown-menu"><span id="CurrentLanguage"></span><span class="icon is-small"><i class="fa fa-angle-down" aria-hidden="true"></i></span></button></div><div class="dropdown-menu" role="menu"><div id="LanguageSelections" class="dropdown-content"><a class="dropdown-item languageFilterItem" data-languageId="cs">C#</a><a class="dropdown-item languageFilterItem" data-languageId="vb">VB</a><a class="dropdown-item languageFilterItem" data-languageId="cpp">C++</a><a class="dropdown-item languageFilterItem" data-languageId="fs">F#</a></div></div></div></div><div class="level-item"><form id="SearchForm" action="#" onsubmit="TransferToSearchPage(); return false;"><div class="field"><div class="control has-icons-left"><input id="SearchTerms" class="input" type="text" maxlength="200" placeholder="Search" /><span class="icon is-small is-left"><i class="fa fa-search"></i></span><button id="SearchButton" type="submit" class="is-hidden"></button></div></div></form></div></div></div></div><div class="fixedContent"><nav class="breadcrumb my-1 px-2 border-bottom" role="navigation"><ul id="TopicBreadcrumbs" /></nav><div id="ContentContainer" class="columns pl-5 pr-5 fixedContent"><div id="ShowHideTOCColumn" class="column is-hidden-tablet"><a id="ShowHideTOC">Show/Hide TOC</a></div><div id="TOCColumn" class="column is-hidden-mobile"><nav class="toc"><ul id="TableOfContents" class="toc-menu" /></nav></div><div id="Resizer" class="is-hidden"></div><div id="TopicContent" class="column content is-7"><h1>Examples Overview</h1><div><p>
				These examples illustrate how to use the class libraries.
			</p></div><div id="IDDABSection" class="noTitle"><h4 class="quickLinkHeader">AntUsbStick Class Library</h4><p>
							This example implements the Small Earth Technology ANT radio interface. This class library is used by the example applications.
							It supports Garmin/Dynastream ANT USB sticks and some development boards with USB interfaces. It is also available on
							<a href="https://www.nuget.org/packages/SmallEarthTech.AntUsbStick" target="_blank" rel="noopener noreferrer">NuGet.</a></p><article class="message is-warning"><div class="message-header"><p><span class="icon"><i class="fa fa-warning"></i></span>  Important</p></div><div class="message-body"><p>Projects that consume this library must set the platform target to x86. This is due to the native DLLs that are a part of this library.</p></div></article><p>
							AntUsbStick provides two primary classes to consuming applications - AntRadio and AntChannel. AntRadio handles global
							ANT USB stick radio settings and operation. AntChannel handles individual channel configuration and communication with ANT devices.
						</p><p>
							AntRadio implements IAntRadio, IAntConfiguration, IAntControl, ICrypto, IFitSettings, and IAntUsbRadio
							interfaces. This is specific to Garmin/Dynastream ANT USB sticks.
							UsbAntResponse derives from AntResponse. It provides access to ANT response messages specific to Garmin/Dynastream ANT USB sticks.
							UsbDeviceCapabilities derives from DeviceCapabilities. It provides access to ANT device capabilities specific to Garmin/Dynastream ANT USB sticks.
						</p><h4 class="quickLinkHeader">WpfUsbStickApp WPF Application</h4><p>
							The WpfUsbStickApp example demonstrates a host builder, using the <a href="825ed94a-e668-4d28-85ff-53cbb962a355.htm">hosting extensions</a>,
							connecting to a Garmin/Dynastream ANT USB stick, enumerating ANT devices via the AntCollection service,
							and interacting with ANT devices. The ANT USB stick class library is initialized for continuous receive scan mode.
						</p><article class="message is-info"><div class="message-header"><p><span class="icon"><i class="fa fa-info-circle"></i></span>  Note</p></div><div class="message-body"><p>This project uses the AntUsbSick library. Therefore, the platform target is set to x86. This is due to the native DLLs that are a part of this project.</p></div></article><h4 class="quickLinkHeader">AntMulticastServer Console Application</h4><article class="message is-warning"><div class="message-header"><p><span class="icon"><i class="fa fa-warning"></i></span>  Caution</p></div><div class="message-body"><p>
								This application is no longer being updated or maintained. It was intended to support Xamarin apps. Xamarin has been superceded by .NET MAUI.
							</p></div></article><p>
							This application creates an IPv6 UdpClient bound to port number 2000. The UdpClient directs all messages received from the
							AntDeviceCollection to the multicast group [::] (all interfaces on the local subnet), port number 55436. A Xamarin
							client example (Android only) is available as a separate solution at
							<a href="https://github.com/StephenHidem/XamAntClientApp/" target="_blank" rel="noopener noreferrer">XamAntClientApp.</a></p></div><h2 id="Section4"><span class="icon toggleSection" tabindex="0"><i class="fa fa-angle-down"></i></span>The MAUI Example Projects</h2><div id="IDEABSection"><p>
					This group of examples is comprised of four projects. AntGrpcShared is a class library providing a gRPC client/server to be consumed by the other
					projects. AntGrpcService is a Windows service that provides services to connect to and communicate with an ANT USB stick.
					The MauiAntClientApp is a .NET MAUI project and gRPC client that is used to demonstrate Windows/Android applications that work with the
					remote server application on a local subnet. <strong>I have not tested the other platforms supported by .NET MAUI.</strong></p><article class="message is-info"><div class="message-header"><p><span class="icon"><i class="fa fa-info-circle"></i></span>  About gRPC</p></div><div class="message-body"><p>
						gRPC is a Google defined protocol for remote procedure calls. It is the recommended RPC to use instead of WCF. Do not
						confuse <strong>gRPC channels</strong> with <strong>ANT radio channels</strong>. gRPC is a
						network protocol, ANT radio channels are a Dynastream/Garmin protocol for ANT radios.
					</p></div></article><p>
					The intent of AntGrpcService is to make the ANT USB stick accessible not only to client applications running on the local
					host but mobile device emulators and mobile devices connected to the network the service is running on.
				</p><p>
					AntGrpcShared is the glue that facilitates communication between clients and the service. The benefit of using
					gRPC is that multiple clients can run simultaneously, both on the local PC and over the network.
				</p><h4 id="SubSection1">AntGrpcShared</h4><p>
							This class library is configured as a gRPC client/server library. The .proto files define the messages and data exchanged
							between client and server implementations.
						</p><h4 id="SubSection2">AntGrpcService</h4><p>
							The server is a Windows service that runs on the host PC that has an ANT USB stick connected to it. Three services are
							provided.
						</p><p>
							The DiscoveryService replies to client messages over a UDP multicast port on the local subnet. This allows clients to obtain
							the URI of the server and connect to the gRPC channel. Think of it as a poor man's service discovery protocol. No authentication
							or validation is performed.
						</p><p>
							The AntRadioService provides methods to get information about the connected ANT USB stick, initialize for continuous scan mode,
							and get channels to communicate with ANT devices via the AntChannelService.
						</p><p>
							The AntChannelService has a method to subscribe to a gRPC stream of ANT messages when the ANT USB stick has been initialized
							for continuous scan mode. The remaining gRPC/ANT radio channels are used to send extended acknowledged messages to individual
							ANT devices.
						</p><p><strong>The service can be debugged!</strong> Make sure the service is not installed or disable it in the
							service controller (<strong>services.msc</strong>). Select the Debug solution configuration and launch it
							from Visual Studio. A console window will open. Logging output is displayed in the console window and breakpoints
							can be set.
						</p><h4 id="SubSection3">MauiAntClientApp</h4><p>
							The client app is the consumer of the client services provided by AntGrpcShared project. The server URI is first obtained via
							a UDP multicast message, a gRPC connection to the server is established, and then requests to initialize and communicate with the
							remote ANT USB stick are invoked.
						</p><h4 id="SubSection4">AntGrpcServicePackage</h4><p>
							The AntGrpcServicePackage installs the AntGrpcService on the local Windows PC and creates a firewall exception allowing network
							traffic between the service and any clients on the network. Wix is used to create the MSI file. You must install the
							Wix toolset to build this project.
						</p></div></div><div id="InThisArticleColumn" class="column is-hidden-mobile"><nav class="menu sticky is-hidden"><p class="menu-label"><strong>In This Article</strong></p><ul id="InThisArticleMenu" class="menu-list"><ul class="menu"><li><a class="quickLink">AntUsbStick Class Library</a></li><li><a class="quickLink">WpfUsbStickApp WPF Application</a></li><li><a class="quickLink">AntMulticastServer Console Application</a></li></ul></ul><li><a class="quickLink">The MAUI Example Projects</a><ul class="menu"><li><a class="quickLink">AntGrpcShared</a></li><li><a class="quickLink">AntGrpcService</a></li><li><a class="quickLink">MauiAntClientApp</a></li><li><a class="quickLink">AntGrpcServicePackage</a></li></ul></li></nav></div></div></div><footer id="PageFooter" class="footer border-top py-3 fixedFooter"><div class="columns"><div id="FooterContent" class="column"><p>© 2022 Stephen Hidem.</p> 
				</div></div></footer></div><script>$(function(){
SetDefaultLanguage("cs");
LoadTocFile(null, null);
InitializeQuickLinks();

$(".toggleSection" ).click(function () {
    SectionExpandCollapse(this);
});

$(".toggleSection").keypress(function () {
    SectionExpandCollapseCheckKey(this, event)
});
});</script></body></html>